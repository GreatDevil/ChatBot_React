{"ast":null,"code":"var _jsxFileName = \"/home/lestradde/Desktop/react/my-app/src/widget.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-transition-group';\nimport './widget.scss';\nimport Form from \"./Form\";\nimport Table from \"./Table\";\nimport Header from \"./Header\";\nimport chak from \"./ChatIcon.png\";\nimport close from \"./ChatIcon_close.png\";\nimport { Link, animateScroll as scroll } from \"react-scroll\";\n\nclass Widget extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      opened: false,\n      showDock: true,\n      msg: \"\",\n      answ: \"\",\n      text: [],\n      header: \"\",\n      botMsg: \"\"\n    };\n\n    this.handleToggleOpen = () => {\n      this.setState(prev => {\n        let {\n          showDock\n        } = prev;\n\n        if (!prev.opened) {\n          showDock = false;\n        }\n\n        return {\n          showDock,\n          opened: !prev.opened\n        };\n      });\n    };\n\n    this.handleWidgetExit = () => {\n      this.setState({\n        showDock: true\n      });\n    };\n\n    this.renderBody = () => {\n      const {\n        showDock\n      } = this.state;\n      if (!showDock) return '';\n      return React.createElement(\"img\", {\n        src: chak,\n        className: \"widget-footer-msg\",\n        onClick: this.handleToggleOpen,\n        onKeyPress: this.handleToggleOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    };\n\n    this.message = msg => {\n      let str = \"Вы сможете принять наш пробник в понедельник утром?\";\n      if (msg !== \"\") this.setState({\n        header: \"-dialog\",\n        botMsg: \"2\",\n        text: this.state.text.concat({\n          msg: msg,\n          class: \"msg_client\"\n        }).concat({\n          msg: str,\n          class: \"msg_bot\"\n        })\n      });\n    };\n\n    this.removeBotMsg = () => {\n      this.setState({\n        botMsg: \"\"\n      });\n    };\n\n    this.append = this.append.bind(this);\n    this.refo = React.createRef();\n  }\n\n  append(value) {\n    const {\n      text\n    } = this.state;\n    return this.setState({\n      text: text.concat({\n        msg: value,\n        class: \"msg_client\"\n      })\n    });\n  }\n\n  render() {\n    const {\n      opened\n    } = this.state;\n    const body = this.renderBody();\n    const {\n      bodyText,\n      headerText,\n      footerText\n    } = this.props;\n    return React.createElement(\"div\", {\n      className: \"docked-widget\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(Transition, {\n      in: opened,\n      timeout: 10,\n      onExited: this.handleWidgetExit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, status => React.createElement(\"div\", {\n      className: `widget widget-${status}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Header, {\n      name: this.state.header,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"widget-body\",\n      id: \"scrolledBlock\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, this.state.text.map(x => React.createElement(\"div\", {\n      className: x.class,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, x.msg)), React.createElement(CompanyScrollToTop, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), React.createElement(Table, {\n      name: this.state.botMsg,\n      changeMsg: this.message,\n      append: this.append,\n      remove: this.removeBotMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"widget-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Form, {\n      changeMsg: this.message,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: close,\n      className: \"widget-footer-shift\",\n      onClick: this.handleToggleOpen,\n      onKeyPress: this.handleToggleOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })))), body);\n  }\n\n}\n\nWidget.propTypes = {\n  headerText: PropTypes.string,\n  bodyText: PropTypes.string,\n  footerText: PropTypes.string\n};\nWidget.defaultProps = {\n  headerText: \"widget-header\",\n  bodyText: \"Я онлайн\",\n  footerText: 'Footer'\n};\n\nclass CompanyScrollToTop extends React.Component {\n  _scrollToTop() {\n    let scroll = document.getElementById('scrolledBlock');\n    scroll.scrollTop = 0;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"arrow-scroll-to-top visible-tablet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this._scrollToTop.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Go top\"));\n  }\n\n}\n\nexport default Widget;","map":{"version":3,"sources":["/home/lestradde/Desktop/react/my-app/src/widget.js"],"names":["React","Component","PropTypes","Transition","Form","Table","Header","chak","close","Link","animateScroll","scroll","Widget","constructor","props","state","opened","showDock","msg","answ","text","header","botMsg","handleToggleOpen","setState","prev","handleWidgetExit","renderBody","message","str","concat","class","removeBotMsg","append","bind","refo","createRef","value","render","body","bodyText","headerText","footerText","status","map","x","propTypes","string","defaultProps","CompanyScrollToTop","_scrollToTop","document","getElementById","scrollTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-transition-group';\nimport './widget.scss';\nimport Form from \"./Form\";\nimport Table from \"./Table\";\nimport Header from \"./Header\";\nimport chak from \"./ChatIcon.png\";\nimport close from \"./ChatIcon_close.png\";\nimport { Link, animateScroll as scroll } from \"react-scroll\";\n\nclass Widget extends Component {\n    constructor(props) {\n        super(props);\n        this.append = this.append.bind(this);\n        this.refo = React.createRef();\n    }\n\n    append(value) {\n        const {text} = this.state\n        return this.setState({\n            text: text.concat({msg: value, class: \"msg_client\"}),\n        });\n\n    }\n    state = {\n        opened: false,\n        showDock: true,\n        msg: \"\",\n        answ: \"\",\n        text: [],\n        header: \"\",\n        botMsg: \"\",\n    }\n\n    handleToggleOpen = () => {\n        this.setState((prev) => {\n            let { showDock } = prev;\n            if (!prev.opened) {\n                showDock = false;\n            }\n            return {\n                showDock,\n                opened: !prev.opened,\n            };\n        });\n    }\n\n    handleWidgetExit = () => {\n        this.setState({\n            showDock: true,\n        });\n    }\n\n    renderBody = () => {\n        const { showDock } = this.state;\n\n        if (!showDock) return '';\n\n        return (\n            <img\n                src={chak}\n                className=\"widget-footer-msg\"\n                onClick={this.handleToggleOpen}\n                onKeyPress={this.handleToggleOpen}\n            />\n        );\n    }\n\n    message = (msg) => {\n        let str = \"Вы сможете принять наш пробник в понедельник утром?\";\n        if (msg !== \"\")\n            this.setState({header: \"-dialog\", botMsg: \"2\",\n                text: this.state.text.concat({msg:msg,class: \"msg_client\"}).concat({msg: str,class: \"msg_bot\"})});\n    }\n\n    removeBotMsg = () => {\n        this.setState({botMsg: \"\",});\n    }\n\n    render() {\n        const { opened } = this.state;\n        const body = this.renderBody();\n        const { bodyText, headerText, footerText } = this.props;\n\n        return (\n            <div className=\"docked-widget\">\n                <Transition in={opened} timeout={10} onExited={this.handleWidgetExit}>\n                    {status => (\n                        <div className={`widget widget-${status}`}>\n                            <Header name = {this.state.header}/>\n                            <div className=\"widget-body\" id={\"scrolledBlock\"}>\n                                <div>\n                                    {this.state.text.map(x => (<div className={x.class}>{x.msg}</div>))}\n                                    <CompanyScrollToTop />\n                                </div>\n                                <Table\n                                    name={this.state.botMsg}\n                                    changeMsg = {this.message}\n                                    append = {this.append}\n                                    remove = {this.removeBotMsg}\n                                />\n                            </div>\n                            <div className=\"widget-footer\">\n                                <Form\n                                    changeMsg = {this.message}\n                                />\n                                <img\n                                    src={close}\n                                    className=\"widget-footer-shift\"\n                                    onClick={this.handleToggleOpen}\n                                    onKeyPress={this.handleToggleOpen}\n                                />\n                            </div>\n                        </div>\n                    )}\n                </Transition>\n                {body}\n            </div>\n        );\n    }\n}\n\nWidget.propTypes = {\n    headerText: PropTypes.string,\n    bodyText: PropTypes.string,\n    footerText: PropTypes.string,\n};\n\nWidget.defaultProps = {\n    headerText: \"widget-header\",\n    bodyText: \"Я онлайн\",\n    footerText: 'Footer',\n};\n\nclass CompanyScrollToTop extends React.Component {\n    _scrollToTop() {\n        let scroll = document.getElementById('scrolledBlock');\n        scroll.scrollTop = 0;\n    }\n    render (){\n        return(\n            <div className=\"arrow-scroll-to-top visible-tablet\">\n                <button onClick={this._scrollToTop.bind(this)}>Go top</button>\n            </div>\n        );\n    }\n}\n\nexport default Widget;"]},"metadata":{},"sourceType":"module"}