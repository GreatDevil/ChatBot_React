{"ast":null,"code":"import _classCallCheck from\"/home/lestradde/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lestradde/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/lestradde/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/lestradde/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/lestradde/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/lestradde/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Transition}from'react-transition-group';import'./widget.scss';import Form from\"./Form\";import Table from\"./Table\";import Header from\"./Header\";import chak from\"./ChatIcon.png\";import close from\"./ChatIcon_close.png\";import{Link,animateScroll as scroll}from\"react-scroll\";var Widget=/*#__PURE__*/function(_Component){_inherits(Widget,_Component);function Widget(props){var _this;_classCallCheck(this,Widget);_this=_possibleConstructorReturn(this,_getPrototypeOf(Widget).call(this,props));_this.state={opened:false,showDock:true,msg:\"\",answ:\"\",text:[],header:\"\",botMsg:\"\"};_this.handleToggleOpen=function(){_this.setState(function(prev){var showDock=prev.showDock;if(!prev.opened){showDock=false;}return{showDock:showDock,opened:!prev.opened};});};_this.handleWidgetExit=function(){_this.setState({showDock:true});};_this.renderBody=function(){var showDock=_this.state.showDock;if(!showDock)return'';return React.createElement(\"img\",{src:chak,className:\"widget-footer-msg\",onClick:_this.handleToggleOpen,onKeyPress:_this.handleToggleOpen});};_this.message=function(msg){var str=\"Вы сможете принять наш пробник в понедельник утром?\";if(msg!==\"\")_this.setState({header:\"-dialog\",botMsg:\"2\",text:_this.state.text.concat({msg:msg,class:\"msg_client\"}).concat({msg:str,class:\"msg_bot\"})});};_this.removeBotMsg=function(){_this.setState({botMsg:\"\"});};_this.append=_this.append.bind(_assertThisInitialized(_this));_this.refo=React.createRef();return _this;}_createClass(Widget,[{key:\"append\",value:function append(value){var text=this.state.text;return this.setState({text:text.concat({msg:value,class:\"msg_client\"},this.scrollToBottom)});}},{key:\"scrollToBottom\",value:function scrollToBottom(){scroll.scrollToBottom({containerId:\"scrolledBlock\"});}},{key:\"render\",value:function render(){var _this2=this;this.setState(this.scrollToBottom);var opened=this.state.opened;var body=this.renderBody();var _this$props=this.props,bodyText=_this$props.bodyText,headerText=_this$props.headerText,footerText=_this$props.footerText;return React.createElement(\"div\",{className:\"docked-widget\"},React.createElement(Transition,{in:opened,timeout:10,onExited:this.handleWidgetExit},function(status){return React.createElement(\"div\",{className:\"widget widget-\".concat(status)},React.createElement(Header,{name:_this2.state.header}),React.createElement(\"div\",{className:\"widget-body\",id:\"scrolledBlock\"},React.createElement(\"div\",null,_this2.state.text.map(function(x){return React.createElement(\"div\",{className:x.class},x.msg);})),React.createElement(Table,{name:_this2.state.botMsg,changeMsg:_this2.message,append:_this2.append,remove:_this2.removeBotMsg,defaultClass:_this2.state.defaultClass})),React.createElement(\"div\",{className:\"widget-footer\"},React.createElement(Form,{changeMsg:_this2.message}),React.createElement(\"img\",{src:close,className:\"widget-footer-shift\",onClick:_this2.handleToggleOpen,onKeyPress:_this2.handleToggleOpen})));}),body);}}]);return Widget;}(Component);Widget.defaultProps={headerText:\"widget-header\",bodyText:\"Я онлайн\",footerText:'Footer'};export default Widget;","map":{"version":3,"sources":["/home/lestradde/Desktop/react/my-app/src/widget.js"],"names":["React","Component","Transition","Form","Table","Header","chak","close","Link","animateScroll","scroll","Widget","props","state","opened","showDock","msg","answ","text","header","botMsg","handleToggleOpen","setState","prev","handleWidgetExit","renderBody","message","str","concat","class","removeBotMsg","append","bind","refo","createRef","value","scrollToBottom","containerId","body","bodyText","headerText","footerText","status","map","x","defaultClass","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-transition-group';\nimport './widget.scss';\nimport Form from \"./Form\";\nimport Table from \"./Table\";\nimport Header from \"./Header\";\nimport chak from \"./ChatIcon.png\";\nimport close from \"./ChatIcon_close.png\";\nimport { Link, animateScroll as scroll } from \"react-scroll\";\n\nclass Widget extends Component {\n    constructor(props) {\n        super(props);\n        this.append = this.append.bind(this);\n        this.refo = React.createRef();\n    }\n\n    append(value) {\n        const {text} = this.state\n        return this.setState({\n            text: text.concat({msg: value, class: \"msg_client\"},this.scrollToBottom),\n        });\n\n    }\n    state = {\n        opened: false,\n        showDock: true,\n        msg: \"\",\n        answ: \"\",\n        text: [],\n        header: \"\",\n        botMsg: \"\",\n    }\n\n    handleToggleOpen = () => {\n        this.setState((prev) => {\n            let { showDock } = prev;\n            if (!prev.opened) {\n                showDock = false;\n            }\n            return {\n                showDock,\n                opened: !prev.opened,\n            };\n        });\n    }\n\n\n    handleWidgetExit = () => {\n        this.setState({\n            showDock: true,\n        });\n    }\n\n    renderBody = () => {\n        const { showDock } = this.state;\n\n        if (!showDock) return '';\n\n        return (\n            <img\n                src={chak}\n                className=\"widget-footer-msg\"\n                onClick={this.handleToggleOpen}\n                onKeyPress={this.handleToggleOpen}\n            />\n        );\n    }\n\n    scrollToBottom() {\n        scroll.scrollToBottom({\n            containerId: \"scrolledBlock\"\n        });\n    }\n\n    message = (msg) => {\n        let str = \"Вы сможете принять наш пробник в понедельник утром?\";\n        if (msg !== \"\")\n            this.setState({header: \"-dialog\", botMsg: \"2\",\n                text: this.state.text.concat({msg:msg,class: \"msg_client\"}).concat({msg: str,class: \"msg_bot\"})});\n    }\n\n    removeBotMsg = () => {\n        this.setState({botMsg: \"\", });\n    }\n\n    render() {\n        this.setState(this.scrollToBottom);\n        const { opened } = this.state;\n        const body = this.renderBody();\n        const { bodyText, headerText, footerText } = this.props;\n\n        return (\n            <div className=\"docked-widget\">\n                <Transition in={opened} timeout={10} onExited={this.handleWidgetExit}>\n                    {status => (\n                        <div className={`widget widget-${status}`}>\n                            <Header name = {this.state.header}/>\n                            <div className=\"widget-body\" id={\"scrolledBlock\"}>\n                                <div>\n                                    {this.state.text.map(x => (<div className={x.class}>{x.msg}</div>))}\n                                </div>\n                                <Table\n                                    name={this.state.botMsg}\n                                    changeMsg = {this.message}\n                                    append = {this.append}\n                                    remove = {this.removeBotMsg}\n                                    defaultClass = {this.state.defaultClass}\n                                />\n                            </div>\n                            <div className=\"widget-footer\">\n                                <Form\n                                    changeMsg = {this.message}\n                                />\n                                <img\n                                    src={close}\n                                    className=\"widget-footer-shift\"\n                                    onClick={this.handleToggleOpen}\n                                    onKeyPress={this.handleToggleOpen}\n                                />\n                            </div>\n                        </div>\n                    )}\n                </Transition>\n                {body}\n            </div>\n        );\n    }\n}\n\nWidget.propTypes = {\n    headerText: PropTypes.string,\n    bodyText: PropTypes.string,\n    footerText: PropTypes.string,\n};\n\nWidget.defaultProps = {\n    headerText: \"widget-header\",\n    bodyText: \"Я онлайн\",\n    footerText: 'Footer',\n};\n\nexport default Widget;"]},"metadata":{},"sourceType":"module"}